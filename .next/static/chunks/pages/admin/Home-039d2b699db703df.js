(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[525],{3154:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var i=r(7876),a=r(4232),d=r(3993),n=r(2964),s=r(7328),l=r.n(s),o=r(9099);function p(){let[e,t]=(0,a.useState)(""),[r,s]=(0,a.useState)(""),[p,c]=(0,a.useState)(""),[x,u]=(0,a.useState)([]),[g,h]=(0,a.useState)(!1),m=(0,o.useRouter)(),_=async()=>{if(!e||!r)return void alert("T\xedtulo y contenido son requeridos");h(!0);try{await (0,n.gS)((0,n.rJ)(d.db,"posts"),{title:e,content:r,imageBase64:p,createdAt:new Date}),t(""),s(""),c(""),E()}catch(e){console.error("Error:",e),alert("Error al guardar")}finally{h(!1)}},E=async()=>{h(!0);try{let e=(await (0,n.GG)((0,n.rJ)(d.db,"posts"))).docs.map(e=>({id:e.id,...e.data()}));u(e)}catch(e){console.error("Error:",e)}finally{h(!1)}};return(0,a.useEffect)(()=>{E()},[]),(0,i.jsxs)("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:[(0,i.jsx)(l(),{children:(0,i.jsx)("title",{children:"Panel Administrativo"})}),(0,i.jsx)("button",{onClick:()=>m.push("/"),style:{marginBottom:"20px"},children:"Ver P\xe1gina P\xfablica"}),(0,i.jsx)("h1",{children:"Panel Administrativo"}),(0,i.jsxs)("div",{style:{backgroundColor:"#f5f5f5",padding:"20px",borderRadius:"8px",marginBottom:"30px"},children:[(0,i.jsx)("h2",{children:"Nuevo Post"}),(0,i.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px"},children:"T\xedtulo:"}),(0,i.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ddd"}})]}),(0,i.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px"},children:"Contenido:"}),(0,i.jsx)("textarea",{value:r,onChange:e=>s(e.target.value),style:{width:"100%",padding:"10px",minHeight:"150px",borderRadius:"4px",border:"1px solid #ddd"}})]}),(0,i.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"5px"},children:"Imagen:"}),(0,i.jsx)("input",{type:"file",onChange:e=>{let t=e.target.files[0];if(t&&t.size>5e5)return void alert("La imagen debe ser menor a 500KB");if(t){let e=new FileReader;e.onloadend=()=>{c(e.result)},e.readAsDataURL(t)}},accept:"image/*"}),p&&(0,i.jsxs)("div",{style:{marginTop:"10px"},children:[(0,i.jsx)("img",{src:p,alt:"Preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"4px"}}),(0,i.jsx)("button",{onClick:()=>c(""),style:{display:"block",marginTop:"5px",color:"red",background:"none",border:"none",cursor:"pointer"},children:"Eliminar imagen"})]})]}),(0,i.jsx)("button",{onClick:_,disabled:g,style:{padding:"10px 20px",background:g?"#ccc":"#0070f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:g?"Guardando...":"Publicar Post"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h2",{children:["Posts Existentes (",x.length,")"]}),g&&0===x.length?(0,i.jsx)("p",{children:"Cargando posts..."}):(0,i.jsx)("div",{style:{display:"grid",gap:"15px"},children:x.map(e=>{var t,r;return(0,i.jsxs)("div",{style:{border:"1px solid #eee",borderRadius:"8px",padding:"15px"},children:[(0,i.jsx)("h3",{children:e.title}),e.imageBase64&&(0,i.jsx)("img",{src:e.imageBase64,alt:e.title,style:{maxWidth:"200px",margin:"10px 0",borderRadius:"4px"}}),(0,i.jsx)("p",{children:e.content}),(0,i.jsx)("small",{style:{color:"#666"},children:null==(r=e.createdAt)||null==(t=r.toDate())?void 0:t.toLocaleString()})]},e.id)})})]})]})}},3340:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/Home",function(){return r(3154)}])},3993:(e,t,r)=>{"use strict";r.d(t,{db:()=>l});var i=r(6042),a=r(2964),d=r(5364);let n={apiKey:d.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:d.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:d.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:d.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:d.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:d.env.NEXT_PUBLIC_FIREBASE_APP_ID},s=(0,i.Wp)(n),l=(0,a.aU)(s)},9099:(e,t,r)=>{e.exports=r(8253)}},e=>{e.O(0,[659,549,636,593,792],()=>e(e.s=3340)),_N_E=e.O()}]);